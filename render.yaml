services:
  # Web Service
  - type: web
    name: worknest-erp
    env: php
    plan: free
    buildCommand: ""
    startCommand: php -S 0.0.0.0:$PORT -t .
    healthCheckPath: /src/auth/login.php
    envVars:
      - key: DB_HOST
        fromDatabase:
          name: worknest-db
          property: host
      - key: DB_NAME
        fromDatabase:
          name: worknest-db
          property: database
      - key: DB_USER
        fromDatabase:
          name: worknest-db
          property: user
      - key: DB_PASS
        fromDatabase:
          name: worknest-db
          property: password
      - key: BASE_URL
        value: https://worknest-erp.onrender.com
      - key: APP_NAME
        value: WorkNest ERP
    disk:
      name: worknest-disk
      mountPath: /opt/render/project
      sizeGB: 1

  # PostgreSQL Database (Render's managed database)
  - type: postgres
    name: worknest-db
    plan: free
    databaseName: worknest_db
    user: worknest_user
    ipAllowList: []
    connectionMethod: direct
